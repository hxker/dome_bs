<div class="container">
  <h2 class="page-header">
    修改密码<!--Edit <%= resource_name.to_s.humanize %>-->

  </h2>

  <div class="row">
    <div class="col-md-4 col-sm-6">
      <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), html: {method: :put}) do |f| %>
          <!--<%= devise_error_messages! %>-->

          <div class="field form-group">
            <% if current_user.email.present? %>
                <label class="control-label" for="user_email">账号</label><br/>
                <%= f.email_field :email, autofocus: true, class: 'form-control',disabled:'disabled' %>
            <% else %>

                <div class="field form-group">
                  <label class="control-label" for="user_email">账号</label>
                  <br>
                  <input id="user_mobile" class="form-control" type="text" disabled="disabled" value="<%= current_user.mobile %>" name="user[mobile]" autofocus="autofocus">
                </div>

            <% end %>
          </div>

          <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
              <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
          <% end %>

          <div class="field form-group">
            <label class="control-label" for="user_current_password">原密码</label><br/>
            <% if resource.errors[:current_password].present? %>
                <ul>
                  <% resource.errors[:current_password].each do |msg| %>
                      <li><%= msg %></li>
                  <% end %>
                </ul>
            <% end %>
            <%= f.password_field :current_password, autocomplete: "off", class: 'form-control' %>
          </div>

          <div class="field form-group">
            <label class="control-label" for="user_password">新密码</label><br/>
            <% if resource.errors[:password].present? %>
                <ul>
                  <% resource.errors[:password].each do |msg| %>
                      <li><%= msg %></li>
                  <% end %>
                </ul>
            <% end %>
            <%= f.password_field :password, autocomplete: "off", class: 'form-control' %>
          </div>

          <div class="field form-group">
            <label class="control-label" for="user_password_confirmation">确认新密码</label><br/>
            <% if resource.errors[:password_confirmation].present? %>
                <ul>
                  <% resource.errors[:password_confirmation].each do |msg| %>
                      <li><%= msg %></li>
                  <% end %>
                </ul>
            <% end %>
            <%= f.password_field :password_confirmation, autocomplete: "off", class: 'form-control' %>
          </div>


          <div class="actions">
            <%= f.submit class: 'btn btn-primary btn-block', value: '更新' %>
          </div>
      <% end %>


      <p><%= button_to '销毁账户', registration_path(resource_name), class: 'btn btn-md btn-info', data: {confirm: "Are you sure?"}, method: :delete %></p>

      <%= link_to '返回', :back %>


    </div>
  </div>

</div>


